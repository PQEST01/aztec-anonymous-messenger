import { AliasHash } from '@aztec/barretenberg/account_id';
import { EthAddress, GrumpkinAddress } from '@aztec/barretenberg/address';
import { DecodedBlock } from '@aztec/barretenberg/block_source';
import { AccountProver, JoinSplitProver, ProofId } from '@aztec/barretenberg/client_proofs';
import { NetCrs } from '@aztec/barretenberg/crs';
import { Blake2s, keccak256, randomBytes, Schnorr } from '@aztec/barretenberg/crypto';
import { Grumpkin } from '@aztec/barretenberg/ecc';
import { createDebugLogger, logHistory } from '@aztec/barretenberg/log';
import { NoteAlgorithms } from '@aztec/barretenberg/note_algorithms';
import { retryUntil } from '@aztec/barretenberg/retry';
import { WorldState, WorldStateConstants } from '@aztec/barretenberg/world_state';
import isNode from 'detect-node';
import { EventEmitter } from 'events';
import { KeyPairAuthAlgorithms } from '../auth_algorithms/key_pair_auth_algorithms.js';
import { sendClientLog, sendClientConsoleLog } from '../client_log/client_log.js';
import { createCorePaymentTxForRecipient } from '../core_tx/index.js';
import { getUserSpendingKeysFromGenesisData } from '../genesis_state/index.js';
import { getDeviceMemory } from '../get_num_workers/index.js';
import { ConstantKeyPair } from '../key_pair/index.js';
import { VERSION_HASH } from '../package_version.js';
import { joinSplitTxInputToJoinSplitTx, joinSplitTxToJoinSplitTxInput, } from '../proofs/index.js';
import { ProofInputFactory } from '../proofs/proof_input/index.js';
import { ProofOutputFactory } from '../proofs/proof_output/index.js';
import { ProofRequestDataFactory } from '../proofs/proof_request_data/index.js';
import { MutexSerialQueue } from '../serial_queue/index.js';
import { SchnorrSigner } from '../signer/index.js';
import { UserStateEvent, UserStateFactory } from '../user_state/index.js';
import { SdkEvent } from './sdk_status.js';
import { sdkVersion } from './sdk_version.js';
import { Synchroniser } from './synchroniser.js';
var SdkInitState;
(function (SdkInitState) {
    // Constructed but uninitialized. Unusable.
    SdkInitState["UNINITIALIZED"] = "UNINITIALIZED";
    // Initialized but not yet synching data tree and user accounts. Can be queried for data, but not create proofs.
    SdkInitState["INITIALIZED"] = "INITIALIZED";
    // Synchronises data tree and user accounts. Ready for proof construction.
    SdkInitState["RUNNING"] = "RUNNING";
    // Stop requested. Wait for synching task to return.
    SdkInitState["STOPPING"] = "STOPPING";
    // Unusable.
    SdkInitState["DESTROYED"] = "DESTROYED";
})(SdkInitState || (SdkInitState = {}));
/**
 * CoreSdk is responsible for keeping everything in sync and proof construction.
 * init() should be called before making any other calls to construct the basic components.
 * run() should be called once a client wants to start synching, or requesting proof construction.
 * Takes ownership of injected components (should destroy them etc).
 * A serial queue ensures that all calls that modify internal state happen in sequence.
 * By default, the serial queue is protected with a cross-process mutex, ensuring that if multiple instances
 * of the CoreSdk exist in different processes, that they will not modify state at the same time.
 */
export class CoreSdk extends EventEmitter {
    constructor(leveldb, db, rollupProvider, barretenberg, noteDecryptor, pedersen, pippenger, fftFactory, workerPool) {
        super();
        this.leveldb = leveldb;
        this.db = db;
        this.rollupProvider = rollupProvider;
        this.barretenberg = barretenberg;
        this.noteDecryptor = noteDecryptor;
        this.pedersen = pedersen;
        this.pippenger = pippenger;
        this.fftFactory = fftFactory;
        this.workerPool = workerPool;
        this.dataVersion = 1;
        this.userStates = [];
        this.broadcastChannel = isNode ? undefined : new BroadcastChannel('aztec-sdk');
        this.sdkStatus = {
            serverUrl: '',
            chainId: -1,
            rollupContractAddress: EthAddress.ZERO,
            permitHelperContractAddress: EthAddress.ZERO,
            verifierContractAddress: EthAddress.ZERO,
            feePayingAssetIds: [0],
            rollupSize: -1,
            syncedToRollup: -1,
            latestRollupId: -1,
            dataRoot: Buffer.alloc(0),
            dataSize: 0,
            useKeyCache: false,
            proverless: false,
            version: sdkVersion,
        };
        this.initState = SdkInitState.UNINITIALIZED;
        this.debug = createDebugLogger('bb:core_sdk');
        if (this.broadcastChannel) {
            this.broadcastChannel.onmessage = ({ data: { event, args } }) => {
                if (event === SdkEvent.UPDATED_USER_STATE) {
                    this.emit(SdkEvent.UPDATED_USER_STATE, GrumpkinAddress.fromString(args[0]));
                }
            };
        }
        this.rollupProvider.on('versionMismatch', error => {
            this.debug(error);
            this.emit(SdkEvent.VERSION_MISMATCH);
        });
        this.serialQueue = new MutexSerialQueue(this.db, 'aztec_core_sdk', 30000);
        this.noteAlgos = new NoteAlgorithms(this.barretenberg);
        this.blake2s = new Blake2s(this.barretenberg);
        this.grumpkin = new Grumpkin(this.barretenberg);
        this.schnorr = new Schnorr(this.barretenberg);
        this.userStateFactory = new UserStateFactory(this.grumpkin, this.noteAlgos, this.noteDecryptor, this.db, this.rollupProvider);
        this.worldState = new WorldState(this.leveldb, this.pedersen);
        this.synchroniser = new Synchroniser(rollupProvider, this.worldState, leveldb, db, pedersen, this.serialQueue);
        this.synchroniser.on(SdkEvent.UPDATED_WORLD_STATE, syncStatus => {
            this.sdkStatus = {
                ...this.sdkStatus,
                ...syncStatus,
            };
            this.emit(SdkEvent.UPDATED_WORLD_STATE, this.sdkStatus.syncedToRollup, this.sdkStatus.latestRollupId);
        });
    }
    /**
     * Constructs internal components.
     * Erases dbs if rollup contract address changed.
     * Loads and initializes known user accounts.
     * Destroys injected components on failure.
     */
    async init(options) {
        if (this.initState !== SdkInitState.UNINITIALIZED) {
            throw new Error('Already initialized.');
        }
        try {
            this.debug(`initializing...${sdkVersion ? ` (version: ${sdkVersion})` : ''}`);
            this.debug(`Version hash: ${VERSION_HASH}`);
            const { blockchainStatus: { chainId, rollupContractAddress, permitHelperContractAddress, verifierContractAddress }, runtimeConfig: { feePayingAssetIds, useKeyCache }, rollupSize, proverless, } = await this.getRemoteStatus();
            // Clear all data if contract changed or dataVersion changed.
            const rca = await this.getLocalRollupContractAddress();
            const localDataVersion = await this.getLocalDataVersion();
            if ((rca && !rca.equals(rollupContractAddress)) || localDataVersion !== this.dataVersion) {
                this.debug('erasing database...');
                await this.leveldb.clear();
                await this.db.clear();
                await this.setLocalDataVersion(this.dataVersion);
            }
            await this.db.addKey('rollupContractAddress', rollupContractAddress.toBuffer());
            // Initialize the "mutable" merkle tree. This is the tree that represents all layers about each rollup subtree.
            const subtreeDepth = Math.ceil(Math.log2(rollupSize * WorldStateConstants.NUM_NEW_DATA_TREE_NOTES_PER_TX));
            await this.worldState.init(subtreeDepth);
            await this.synchroniser.init();
            this.sdkStatus = {
                ...this.sdkStatus,
                ...this.synchroniser.getSyncStatus(),
                serverUrl: options.serverUrl,
                chainId,
                rollupContractAddress,
                permitHelperContractAddress,
                verifierContractAddress,
                feePayingAssetIds,
                rollupSize,
                useKeyCache,
                proverless,
            };
            this.proofRequestDataFactory = new ProofRequestDataFactory(this.worldState, this.db, this.blake2s);
            this.proofInputFactory = new ProofInputFactory(this.noteAlgos, this.grumpkin, this.pedersen, this.barretenberg);
            this.proofOutputFactory = new ProofOutputFactory(proverless, this.noteAlgos, this.pippenger, this.fftFactory, this.barretenberg, this.workerPool);
            // Ensures we can get the list of users and access current known balances.
            await this.initUserStates();
            this.initState = SdkInitState.INITIALIZED;
            this.debug('initialization complete.');
        }
        catch (err) {
            this.debug('initialization failed: ', err);
            // If initialization fails, we should destroy the components we've taken ownership of.
            await this.leveldb.close();
            await this.db.close();
            await this.workerPool?.destroy();
            this.serialQueue?.cancel();
            throw err;
        }
    }
    async destroy(error) {
        this.debug('destroying...');
        // If sync() task is running, signals it to stop, to awake for exit if it's asleep, and awaits the exit.
        this.initState = SdkInitState.STOPPING;
        await this.synchroniser.stop();
        // The serial queue will cancel itself. This ensures that anything currently in the queue finishes, and ensures
        // that once the await to push() returns, nothing else is on, or can be added to the queue.
        await this.serialQueue.push(() => Promise.resolve(this.serialQueue.cancel()));
        // Stop listening to account state updates.
        this.userStates.forEach(us => us.removeAllListeners());
        // Destroy injected components.
        await this.fftFactory.destroy();
        await this.leveldb.close();
        await this.db.close();
        await this.workerPool?.destroy();
        // Destroy components.
        this.broadcastChannel?.close();
        this.initState = SdkInitState.DESTROYED;
        this.emit(SdkEvent.DESTROYED, error);
        this.removeAllListeners();
        this.debug('destroyed.');
    }
    getLocalStatus() {
        return Promise.resolve({ ...this.sdkStatus });
    }
    async getRemoteStatus() {
        return await this.rollupProvider.getStatus();
    }
    async sendConsoleLog(clientData, preserveLog) {
        const logs = logHistory.getLogs();
        if (!logs.length && !clientData?.length) {
            return;
        }
        const publicKeys = this.userStates.map(us => us.getUserData().accountPublicKey);
        const ensureJson = (log) => log.map(logArgs => {
            try {
                JSON.stringify(logArgs);
                return logArgs;
            }
            catch (e) {
                return `${logArgs}`;
            }
        });
        await sendClientConsoleLog(this.rollupProvider, {
            publicKeys: publicKeys.map(k => k.toString()),
            logs: logs.map(ensureJson),
            clientData,
            clientUrl: location?.href,
        });
        if (!preserveLog) {
            logHistory.clear(logs.length);
        }
    }
    async isAccountRegistered(accountPublicKey, includePending) {
        return (!!(await this.db.getAlias(accountPublicKey)) ||
            (includePending && (await this.rollupProvider.isAccountRegistered(accountPublicKey))));
    }
    async isAliasRegistered(alias, includePending) {
        const aliasHash = this.computeAliasHash(alias);
        return ((await this.db.getAliasByAliasHash(aliasHash)) !== undefined ||
            (includePending && (await this.rollupProvider.isAliasRegistered(alias))));
    }
    async isAliasRegisteredToAccount(accountPublicKey, alias, includePending) {
        const aliasHash = this.computeAliasHash(alias);
        const savedAlias = await this.db.getAlias(accountPublicKey);
        return savedAlias
            ? savedAlias.aliasHash.equals(aliasHash)
            : includePending && (await this.rollupProvider.isAliasRegisteredToAccount(accountPublicKey, alias));
    }
    async getAccountPublicKey(alias) {
        const aliasHash = this.computeAliasHash(alias);
        const dbAlias = await this.db.getAliasByAliasHash(aliasHash);
        if (!dbAlias) {
            return;
        }
        const { accountPublicKey, noteCommitment1, spendingPublicKeyX } = dbAlias;
        // If there is an entry in the address book for the recipient, that has both the note commitment and spending
        // key x coordinate, then we need to validate the data hashes to the account note commitment. This allows us
        // to skip computing the commitment for every single alias when synching. Rather we just do it on send.
        if (noteCommitment1 && spendingPublicKeyX) {
            // We only stored the X coordinate, and it's the only thing needed. Pad the Y coordinate.
            const spendingPublicKey = Buffer.concat([spendingPublicKeyX, Buffer.alloc(32)]);
            const commitment = this.noteAlgos.accountNoteCommitment(aliasHash, accountPublicKey, spendingPublicKey);
            if (!commitment.equals(noteCommitment1)) {
                throw new Error('Failed to validate account note commitment for recipient.');
            }
        }
        return accountPublicKey;
    }
    async getAccountIndex(alias) {
        const aliasHash = this.computeAliasHash(alias);
        const result = await this.db.getAliasByAliasHash(aliasHash);
        return result?.index;
    }
    async getTxFees(assetId) {
        return await this.rollupProvider.getTxFees(assetId);
    }
    async getDefiFees(bridgeCallData) {
        return await this.rollupProvider.getDefiFees(bridgeCallData);
    }
    async getPendingDepositTxs() {
        return await this.rollupProvider.getPendingDepositTxs();
    }
    async getDefiInteractionNonce(txId) {
        const tx = await this.db.getDefiTx(txId);
        if (!tx) {
            throw new Error('Unknown txId');
        }
        return tx.interactionNonce;
    }
    async userExists(userId) {
        return !!(await this.db.getUser(userId));
    }
    getUsers() {
        return Promise.resolve(this.userStates.map(us => us.getUserData().accountPublicKey));
    }
    derivePublicKey(privateKey) {
        return Promise.resolve(new GrumpkinAddress(this.grumpkin.mul(Grumpkin.generator, privateKey)));
    }
    deriveLegacySigningMessageHash(address) {
        const signingMessage = this.blake2s.hashToField(address.toBuffer());
        return Promise.resolve(keccak256(signingMessage));
    }
    constructSignature(message, privateKey) {
        return Promise.resolve(this.schnorr.constructSignature(message, privateKey));
    }
    async addUser(accountPrivateKey, registrationSync = false, registrationSyncMarginBlocks = 10) {
        let shouldResync = true;
        const accountPublicKey = await this.derivePublicKey(accountPrivateKey);
        await this.serialQueue.push(async () => {
            if (await this.db.getUser(accountPublicKey)) {
                throw new Error(`User already exists: ${accountPublicKey}`);
            }
            let syncedToRollup = -1;
            if (registrationSync) {
                const { latestRollupId } = this.sdkStatus;
                const registrationRollupId = await this.rollupProvider.getAccountRegistrationRollupId(accountPublicKey);
                if (registrationRollupId !== -1) {
                    const startingPoint = registrationRollupId - registrationSyncMarginBlocks;
                    syncedToRollup = startingPoint < -1 ? -1 : startingPoint;
                    this.debug(`Adding registrationSync account registered at ${registrationRollupId}, synching from ${syncedToRollup}`);
                }
                else {
                    shouldResync = false;
                    syncedToRollup = latestRollupId;
                }
            }
            const user = { accountPrivateKey, accountPublicKey, syncedToRollup };
            await this.db.addUser(user);
            await this.addInitialUserSpendingKeys([user.accountPublicKey]);
            const userState = await this.userStateFactory.createUserState(user);
            userState.on(UserStateEvent.UPDATED_USER_STATE, id => {
                this.emit(SdkEvent.UPDATED_USER_STATE, id);
                this.broadcastChannel?.postMessage({
                    event: SdkEvent.UPDATED_USER_STATE,
                    args: [id.toString()],
                });
            });
            this.userStates = [...this.userStates, userState];
            this.synchroniser.setUserStates(this.userStates);
        });
        // If this account is already registered, we need to restart syncing from registration
        // It cannot be done in the serial queue as synchroniser.stop can deadlock
        if (shouldResync && this.initState == SdkInitState.RUNNING) {
            await this.synchroniser.stop();
            await this.synchroniser.start();
        }
        return accountPublicKey;
    }
    async removeUser(userId) {
        return await this.serialQueue.push(async () => {
            const userState = this.getUserState(userId);
            this.userStates = this.userStates.filter(us => us !== userState);
            this.synchroniser.setUserStates(this.userStates);
            await userState.shutdown();
            userState.removeAllListeners();
            await this.db.removeUser(userId);
        });
    }
    getUserSyncedToRollup(userId) {
        return Promise.resolve(this.getUserState(userId).getUserData().syncedToRollup);
    }
    async getSpendingKeys(userId) {
        const keys = await this.db.getSpendingKeys(userId);
        return keys.map(k => k.key);
    }
    async getBalances(userId) {
        return await this.getUserState(userId).getBalances();
    }
    async getBalance(userId, assetId) {
        const userState = this.getUserState(userId);
        return await userState.getBalance(assetId);
    }
    async getSpendableNoteValues(userId, assetId, spendingKeyRequired, excludePendingNotes) {
        const userState = this.getUserState(userId);
        return await userState.getSpendableNoteValues(assetId, { spendingKeyRequired, excludePendingNotes });
    }
    async getSpendableSum(userId, assetId, spendingKeyRequired, excludePendingNotes) {
        const userState = this.getUserState(userId);
        return await userState.getSpendableSum(assetId, { spendingKeyRequired, excludePendingNotes });
    }
    async getSpendableSums(userId, spendingKeyRequired, excludePendingNotes) {
        const userState = this.getUserState(userId);
        return await userState.getSpendableSums({ spendingKeyRequired, excludePendingNotes });
    }
    async getMaxSpendableNoteValues(userId, assetId, spendingKeyRequired, excludePendingNotes, numNotes) {
        const userState = this.getUserState(userId);
        return await userState.getMaxSpendableNoteValues(assetId, { spendingKeyRequired, excludePendingNotes, numNotes });
    }
    async pickNotes(userId, assetId, value, spendingKeyRequired, excludePendingNotes) {
        return await this.getUserState(userId).pickNotes(assetId, value, { spendingKeyRequired, excludePendingNotes });
    }
    async pickNote(userId, assetId, value, spendingKeyRequired, excludePendingNotes) {
        return await this.getUserState(userId).pickNote(assetId, value, { spendingKeyRequired, excludePendingNotes });
    }
    async getUserTxs(userId) {
        return await this.db.getUserTxs(userId);
    }
    /**
     * Moves the sdk into RUNNING state.
     * Kicks off data tree updates, user note decryptions, alias table updates, proving key construction.
     */
    run() {
        if (this.initState === SdkInitState.RUNNING) {
            return Promise.resolve();
        }
        this.initState = SdkInitState.RUNNING;
        this.serialQueue
            .push(async () => {
            const maxCircuitSize = Math.max(JoinSplitProver.getCircuitSize(), AccountProver.getCircuitSize());
            const crsData = await this.getCrsData(maxCircuitSize);
            await this.pippenger.init(crsData);
            await this.synchroniser.start();
            this.synchroniser.onAbort(err => {
                this.debug('failed to sync:', err);
                void this.destroy(`Failed to sync: ${err.message}`);
            });
        })
            .catch(err => {
            this.debug('failed to run:', err);
            return this.destroy(`Failed to run: ${err.message}`);
        });
        return Promise.resolve();
    }
    // -------------------------------------------------------
    // PUBLIC METHODS FROM HERE ON REQUIRE run() TO BE CALLED.
    // -------------------------------------------------------
    async createDepositProof(assetId, publicInput, privateOutput, depositor, recipient, recipientSpendingKeyRequired, txRefNo, timeout) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            // Create a one time user to generate and sign the proof.
            const accountPrivateKey = randomBytes(32);
            const accountPublicKey = await this.derivePublicKey(accountPrivateKey);
            const spendingPublicKey = accountPublicKey;
            const depositValue = privateOutput;
            const feeValue = publicInput - privateOutput;
            const proofRequestData = await this.proofRequestDataFactory.createPaymentProofRequestData(ProofId.DEPOSIT, accountPublicKey, spendingPublicKey, { assetId, value: depositValue }, { assetId, value: feeValue }, depositor, recipient, recipientSpendingKeyRequired);
            const accountKeyPair = new ConstantKeyPair(accountPublicKey, accountPrivateKey, this.schnorr);
            const authAlgos = new KeyPairAuthAlgorithms(accountKeyPair, this.grumpkin, this.noteAlgos, this.noteDecryptor, this.barretenberg);
            const proofInput = (await this.proofInputFactory.createProofInputs(proofRequestData, authAlgos))[0];
            const signer = new SchnorrSigner(this, accountPublicKey, accountPrivateKey);
            const signature = await signer.signMessage(proofInput.signingData);
            return this.runOrClientLog(() => this.proofOutputFactory.createPaymentProof(proofInput, signature, txRefNo, accountKeyPair, timeout), 'Failed to create deposit proof.');
        });
    }
    async createPaymentProofInputs(userId, assetId, publicInput, publicOutput, privateInput, recipientPrivateOutput, senderPrivateOutput, noteRecipient, recipientSpendingKeyRequired, publicOwner, spendingPublicKey, allowChain) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const userState = this.getUserState(userId);
            const user = userState.getUserData();
            const proofId = (() => {
                if (publicInput > 0) {
                    return ProofId.DEPOSIT;
                }
                if (publicOutput > 0) {
                    return ProofId.WITHDRAW;
                }
                return ProofId.SEND;
            })();
            const value = (() => {
                if (publicInput > 0) {
                    return publicInput;
                }
                if (publicOutput > 0) {
                    return publicOutput;
                }
                return recipientPrivateOutput;
            })();
            const feeValue = publicInput + privateInput - (publicOutput + recipientPrivateOutput + senderPrivateOutput);
            const proofRequestData = await this.proofRequestDataFactory.createPaymentProofRequestData(proofId, userId, spendingPublicKey, { assetId, value }, { assetId, value: feeValue }, publicOwner || EthAddress.ZERO, noteRecipient || GrumpkinAddress.generator(), recipientSpendingKeyRequired, userState, { allowChain: !!allowChain });
            const accountKeyPair = new ConstantKeyPair(user.accountPublicKey, user.accountPrivateKey, this.schnorr);
            const authAlgos = new KeyPairAuthAlgorithms(accountKeyPair, this.grumpkin, this.noteAlgos, this.noteDecryptor, this.barretenberg);
            const proofInputs = (await this.proofInputFactory.createProofInputs(proofRequestData, authAlgos)).map(proofInput => {
                const { tx, viewingKeys, signingData } = proofInput;
                return {
                    tx: joinSplitTxInputToJoinSplitTx(tx, user.accountPrivateKey, user.accountPublicKey),
                    viewingKeys,
                    signingData,
                };
            });
            return proofInputs;
        });
    }
    async createPaymentProof(input, txRefNo, timeout) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const { outputNotes } = input.tx;
            const userId = outputNotes[1].ownerPubKey;
            const userState = this.getUserState(userId);
            const user = userState.getUserData();
            const accountKeyPair = new ConstantKeyPair(user.accountPublicKey, user.accountPrivateKey, this.schnorr);
            return await this.runOrClientLog(() => this.proofOutputFactory.createPaymentProof({ ...input, tx: joinSplitTxToJoinSplitTxInput(input.tx, user.accountPrivateKey, this.noteAlgos) }, input.signature, txRefNo, accountKeyPair, timeout), 'Failed to create payment proof.');
        });
    }
    async createAccountProofSigningData(accountPublicKey, alias, migrate, spendingPublicKey, newAccountPublicKey = accountPublicKey, newSpendingPublicKey1, newSpendingPublicKey2) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const proofRequestData = await this.proofRequestDataFactory.createAccountProofRequestData(accountPublicKey, accountPublicKey, // set the accountPublicKey as spendingPublicKey so the factory won't fetch its hash path.
            alias || '', newAccountPublicKey, newSpendingPublicKey1 || GrumpkinAddress.ZERO, newSpendingPublicKey2 || GrumpkinAddress.ZERO, { assetId: 0, value: BigInt(0) }, // deposit
            { assetId: 0, value: BigInt(0) }, // fee
            EthAddress.ZERO);
            const randomAccountPrivateKey = randomBytes(32);
            const randomAccountPublicKey = await this.derivePublicKey(randomAccountPrivateKey);
            const accountKeyPair = new ConstantKeyPair(randomAccountPublicKey, randomAccountPrivateKey, this.schnorr);
            const authAlgos = new KeyPairAuthAlgorithms(accountKeyPair, this.grumpkin, this.noteAlgos, this.noteDecryptor, this.barretenberg);
            // Set the spendingPublicKey back to recoveryPublicKey.
            const { spendingKeyAccount } = proofRequestData;
            const [proofInput] = await this.proofInputFactory.createProofInputs({
                ...proofRequestData,
                spendingKeyAccount: { ...spendingKeyAccount, spendingPublicKey },
            }, authAlgos);
            return proofInput.signingData;
        });
    }
    async createAccountProofInput(userId, spendingPublicKey, migrate, alias, newSpendingPublicKey1, newSpendingPublicKey2, newAccountPrivateKey) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const newAccountPublicKey = newAccountPrivateKey ? await this.derivePublicKey(newAccountPrivateKey) : userId;
            const proofRequestData = await this.proofRequestDataFactory.createAccountProofRequestData(userId, spendingPublicKey, alias || '', newAccountPublicKey, newSpendingPublicKey1 || GrumpkinAddress.ZERO, newSpendingPublicKey2 || GrumpkinAddress.ZERO, { assetId: 0, value: BigInt(0) }, // deposit
            { assetId: 0, value: BigInt(0) }, // fee
            EthAddress.ZERO);
            // Zero deposit and fee => no payment proofs will be created.
            // authAlgos doesn't have to be created with the user's account.
            const randomAccountPrivateKey = randomBytes(32);
            const randomAccountPublicKey = await this.derivePublicKey(randomAccountPrivateKey);
            const accountKeyPair = new ConstantKeyPair(randomAccountPublicKey, randomAccountPrivateKey, this.schnorr);
            const authAlgos = new KeyPairAuthAlgorithms(accountKeyPair, this.grumpkin, this.noteAlgos, this.noteDecryptor, this.barretenberg);
            const [proofInput] = await this.proofInputFactory.createProofInputs(proofRequestData, authAlgos);
            const { tx, signingData } = proofInput;
            return { tx, signingData };
        });
    }
    async createAccountProof(input, txRefNo, timeout) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            return await this.runOrClientLog(() => this.proofOutputFactory.createAccountProof(input, input.signature, txRefNo, timeout), 'Failed to create account proof.');
        });
    }
    async createDefiProofInput(userId, bridgeCallData, depositValue, fee, spendingPublicKey) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const userState = this.getUserState(userId);
            const user = userState.getUserData();
            const proofRequestData = await this.proofRequestDataFactory.createDefiProofRequestData(userId, spendingPublicKey, bridgeCallData, { assetId: bridgeCallData.inputAssetIdA, value: depositValue }, { assetId: bridgeCallData.inputAssetIdA, value: fee }, userState);
            const accountKeyPair = new ConstantKeyPair(user.accountPublicKey, user.accountPrivateKey, this.schnorr);
            const authAlgos = new KeyPairAuthAlgorithms(accountKeyPair, this.grumpkin, this.noteAlgos, this.noteDecryptor, this.barretenberg);
            const proofInputs = (await this.proofInputFactory.createProofInputs(proofRequestData, authAlgos)).map(proofInput => {
                if (proofInput.viewingKeys) {
                    const { tx, viewingKeys, signingData } = proofInput;
                    return {
                        tx: joinSplitTxInputToJoinSplitTx(tx, user.accountPrivateKey, user.accountPublicKey),
                        viewingKeys,
                        signingData,
                    };
                }
                else {
                    const { tx, viewingKey, signingData, partialStateSecretEphPubKey } = proofInput;
                    return {
                        tx: joinSplitTxInputToJoinSplitTx(tx, user.accountPrivateKey, user.accountPublicKey),
                        viewingKeys: [viewingKey],
                        signingData,
                        partialStateSecretEphPubKey,
                    };
                }
            });
            return proofInputs;
        });
    }
    async createDefiProof(input, txRefNo, timeout) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const { tx, viewingKeys } = input;
            const userId = tx.outputNotes[1].ownerPubKey;
            const userState = this.getUserState(userId);
            const user = userState.getUserData();
            const accountKeyPair = new ConstantKeyPair(user.accountPublicKey, user.accountPrivateKey, this.schnorr);
            return await this.runOrClientLog(() => this.proofOutputFactory.createDefiProof({
                ...input,
                viewingKey: viewingKeys[0],
                partialStateSecretEphPubKey: input.partialStateSecretEphPubKey,
                tx: joinSplitTxToJoinSplitTxInput(tx, user.accountPrivateKey, this.noteAlgos),
            }, input.signature, txRefNo, accountKeyPair, timeout), 'Failed to create defi proof.');
        });
    }
    async sendProofs(proofs, proofTxs = []) {
        return await this.serialQueue.push(async () => {
            this.assertInitState(SdkInitState.RUNNING);
            const txs = proofs.map(({ proofData, offchainTxData, signature }) => ({
                proofData: proofData.rawProofData,
                offchainTxData: offchainTxData.toBuffer(),
                depositSignature: signature,
            }));
            const txIds = await this.rollupProvider.sendTxs([...proofTxs, ...txs]);
            for (const proof of proofs) {
                const { userId } = proof.tx;
                // Proof sender may not have an account.
                await this.getUserStateUndef(userId)?.addProof(proof);
                // Add the payment proof to recipient's account if they are not the sender.
                if ([ProofId.DEPOSIT, ProofId.SEND].includes(proof.tx.proofId)) {
                    const recipient = proof.outputNotes[0].owner;
                    if (!recipient.equals(userId)) {
                        const recipientTx = createCorePaymentTxForRecipient(proof.tx, recipient);
                        // Recipient may not have an account.
                        await this.getUserStateUndef(recipient)?.addProof({ ...proof, tx: recipientTx });
                    }
                }
            }
            return txIds;
        });
    }
    async awaitSynchronised(timeout) {
        this.assertInitState(SdkInitState.RUNNING);
        await retryUntil(() => this.isSynchronised(), 'data synchronised', timeout);
    }
    isUserSynching(userId) {
        this.assertInitState(SdkInitState.RUNNING);
        return Promise.resolve(!this.getUserState(userId).isSynchronised(this.sdkStatus.latestRollupId));
    }
    async awaitUserSynchronised(userId, timeout) {
        this.assertInitState(SdkInitState.RUNNING);
        await this.getUserState(userId).awaitSynchronised(this.sdkStatus.latestRollupId, timeout);
        await this.awaitSynchronised();
    }
    async awaitSettlement(txId, timeout) {
        this.assertInitState(SdkInitState.RUNNING);
        await retryUntil(() => this.db.isUserTxSettled(txId), `tx settlement: ${txId}`, timeout);
    }
    async awaitDefiDepositCompletion(txId, timeout) {
        this.assertInitState(SdkInitState.RUNNING);
        const defiDepositCompleted = async () => {
            const tx = await this.db.getDefiTx(txId);
            if (!tx) {
                throw new Error('Unknown txId.');
            }
            return !!tx.settled;
        };
        await retryUntil(defiDepositCompleted, `defi interaction: ${txId}`, timeout);
    }
    async awaitDefiFinalisation(txId, timeout) {
        this.assertInitState(SdkInitState.RUNNING);
        const defiFinalised = async () => {
            const tx = await this.db.getDefiTx(txId);
            if (!tx) {
                throw new Error('Unknown txId.');
            }
            return !!tx.finalised;
        };
        await retryUntil(defiFinalised, `defi finalisation: ${txId}`, timeout);
    }
    async awaitDefiSettlement(txId, timeout) {
        this.assertInitState(SdkInitState.RUNNING);
        const defiSettled = async () => {
            const tx = await this.db.getDefiTx(txId);
            if (!tx) {
                throw new Error('Unknown txId.');
            }
            return !!tx.claimSettled;
        };
        await retryUntil(defiSettled, `defi settlement: ${txId}`, timeout);
    }
    // ---------------
    // PRIVATE METHODS
    // ---------------
    // TODO: Get rid of throwing behaviour.
    getUserState(userId) {
        const userState = this.userStates.find(us => us.getUserData().accountPublicKey.equals(userId));
        if (!userState) {
            throw new Error(`User not found: ${userId}`);
        }
        return userState;
    }
    getUserStateUndef(userId) {
        return this.userStates.find(us => us.getUserData().accountPublicKey.equals(userId));
    }
    isSynchronised() {
        // this.debug(`isSynchronised: ${this.sdkStatus.syncedToRollup} === ${this.sdkStatus.latestRollupId}`);
        return this.sdkStatus.syncedToRollup === this.sdkStatus.latestRollupId;
    }
    assertInitState(state) {
        if (this.initState !== state) {
            throw new Error(`Init state ${this.initState} !== ${state}`);
        }
    }
    async setLocalDataVersion(version) {
        await this.db.addKey('dataVersion', Buffer.from([version]));
    }
    async getLocalDataVersion() {
        const result = await this.db.getKey('dataVersion');
        return result ? result.readInt8(0) : 0;
    }
    async getLocalRollupContractAddress() {
        const result = await this.db.getKey('rollupContractAddress');
        return result ? new EthAddress(result) : undefined;
    }
    async getCrsData(circuitSize) {
        this.debug('downloading crs data...');
        const crs = new NetCrs(circuitSize);
        await crs.init();
        this.debug('done.');
        return Buffer.from(crs.getData());
    }
    /**
     * Loads known accounts from db.
     * Registers to forward any notifications of account state updates.
     */
    async initUserStates() {
        this.debug('initializing user states...');
        const users = await this.db.getUsers();
        await this.addInitialUserSpendingKeys(users.map(x => x.accountPublicKey));
        this.userStates = await Promise.all(users.map(u => this.userStateFactory.createUserState(u)));
        this.synchroniser.setUserStates(this.userStates);
        this.userStates.forEach(us => us.on(UserStateEvent.UPDATED_USER_STATE, id => {
            this.emit(SdkEvent.UPDATED_USER_STATE, id);
            this.broadcastChannel?.postMessage({
                event: SdkEvent.UPDATED_USER_STATE,
                args: [id.toString()],
            });
        }));
    }
    async addInitialUserSpendingKeys(userIds) {
        if (!userIds.length) {
            return;
        }
        const { initialAccounts: genesisAccountsData } = await this.synchroniser.retrieveGenesisData();
        if (genesisAccountsData.length) {
            const spendingKeys = await getUserSpendingKeysFromGenesisData(userIds, genesisAccountsData, this.pedersen, this.sdkStatus.rollupSize);
            this.debug(`found ${spendingKeys.length} spending keys for user${userIds.length == 1 ? '' : 's'}`);
            if (spendingKeys.length) {
                await this.db.addSpendingKeys(spendingKeys);
            }
        }
    }
    computeAliasHash(alias) {
        return AliasHash.fromAlias(alias, this.blake2s);
    }
    async runOrClientLog(fn, message) {
        const start = Date.now();
        try {
            return await fn();
        }
        catch (e) {
            const log = {
                message,
                error: e.message,
                timeUsed: Date.now() - start,
                memory: getDeviceMemory(),
            };
            await sendClientLog(this.rollupProvider, log);
            this.debug(log);
            throw e;
        }
    }
    async queryDefiPublishStats(query) {
        return await this.rollupProvider.queryDefiPublishStats(query);
    }
    async getBlocks(from, take = 1) {
        const rawBlocks = await this.rollupProvider.getBlocks(from, Math.min(Math.max(take, 1), 5));
        return rawBlocks.map(x => new DecodedBlock(x));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZV9zZGsuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29yZV9zZGsvY29yZV9zZGsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzNELE9BQU8sRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRWhFLE9BQU8sRUFBRSxhQUFhLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQzVGLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBWSxXQUFXLEVBQUUsT0FBTyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDaEcsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRW5ELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxVQUFVLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUN4RSxPQUFPLEVBQUUsY0FBYyxFQUFpQixNQUFNLHFDQUFxQyxDQUFDO0FBRXBGLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUl2RCxPQUFPLEVBQUUsVUFBVSxFQUFFLG1CQUFtQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDbEYsT0FBTyxNQUFNLE1BQU0sYUFBYSxDQUFDO0FBQ2pDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFFdEMsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDdkYsT0FBTyxFQUFFLGFBQWEsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ2xGLE9BQU8sRUFBaUIsK0JBQStCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVyRixP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