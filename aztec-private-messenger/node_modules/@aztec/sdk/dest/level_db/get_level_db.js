import isNode from 'detect-node';
import { mkdirSync } from 'fs';
import { default as levelup } from 'levelup';
import { default as memdown } from 'memdown';
import { levelUpNodeFactory } from './node/index.js';
import { levelUpWebFactory } from './browser/index.js';
export function getLevelDb(name, memoryDb = false, identifier) {
    if (isNode) {
        const folder = identifier ? `/${identifier}` : '';
        const dbPath = `./data${folder}`;
        if (memoryDb) {
            return levelup(memdown());
        }
        else {
            mkdirSync(dbPath, { recursive: true });
            return levelUpNodeFactory(`${dbPath}/${name}.db`);
        }
    }
    else {
        return levelUpWebFactory(name);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0X2xldmVsX2RiLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xldmVsX2RiL2dldF9sZXZlbF9kYi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLE1BQU0sTUFBTSxhQUFhLENBQUM7QUFDakMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLElBQUksQ0FBQztBQUMvQixPQUFPLEVBQUUsT0FBTyxJQUFJLE9BQU8sRUFBVyxNQUFNLFNBQVMsQ0FBQztBQUN0RCxPQUFPLEVBQUUsT0FBTyxJQUFJLE9BQU8sRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUM3QyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUV2RCxNQUFNLFVBQVUsVUFBVSxDQUFDLElBQVksRUFBRSxRQUFRLEdBQUcsS0FBSyxFQUFFLFVBQW1CO0lBQzVFLElBQUksTUFBTSxFQUFFO1FBQ1YsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbEQsTUFBTSxNQUFNLEdBQUcsU0FBUyxNQUFNLEVBQUUsQ0FBQztRQUNqQyxJQUFJLFFBQVEsRUFBRTtZQUNaLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7U0FDM0I7YUFBTTtZQUNMLFNBQVMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUN2QyxPQUFPLGtCQUFrQixDQUFDLEdBQUcsTUFBTSxJQUFJLElBQUksS0FBSyxDQUFDLENBQUM7U0FDbkQ7S0FDRjtTQUFNO1FBQ0wsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNoQztBQUNILENBQUMifQ==