import { __decorate, __metadata } from "tslib";
import { AliasHash } from '@aztec/barretenberg/account_id';
import { GrumpkinAddress } from '@aztec/barretenberg/address';
import { TxId } from '@aztec/barretenberg/tx_id';
import { AfterInsert, AfterLoad, AfterUpdate, Column, Entity, Index, PrimaryColumn } from 'typeorm';
import { aliasHashTransformer, grumpkinAddressTransformer, txIdTransformer } from './transformer.js';
let AccountTxDao = class AccountTxDao {
    constructor(init) {
        Object.assign(this, init);
    }
    afterLoad() {
        if (this.settled === null) {
            delete this.settled;
        }
    }
};
__decorate([
    PrimaryColumn('blob', { transformer: [txIdTransformer] }),
    __metadata("design:type", TxId)
], AccountTxDao.prototype, "txId", void 0);
__decorate([
    Index({ unique: false }),
    Column('blob', { transformer: [grumpkinAddressTransformer] }),
    __metadata("design:type", GrumpkinAddress)
], AccountTxDao.prototype, "userId", void 0);
__decorate([
    Column('blob', { nullable: true, transformer: [aliasHashTransformer] }),
    __metadata("design:type", AliasHash)
], AccountTxDao.prototype, "aliasHash", void 0);
__decorate([
    Column({ nullable: true }),
    __metadata("design:type", Buffer)
], AccountTxDao.prototype, "newSpendingPublicKey1", void 0);
__decorate([
    Column({ nullable: true }),
    __metadata("design:type", Buffer)
], AccountTxDao.prototype, "newSpendingPublicKey2", void 0);
__decorate([
    Column(),
    __metadata("design:type", Boolean)
], AccountTxDao.prototype, "migrated", void 0);
__decorate([
    Column(),
    __metadata("design:type", Number)
], AccountTxDao.prototype, "txRefNo", void 0);
__decorate([
    Column(),
    __metadata("design:type", Date)
], AccountTxDao.prototype, "created", void 0);
__decorate([
    Column({ nullable: true }),
    __metadata("design:type", Date)
], AccountTxDao.prototype, "settled", void 0);
__decorate([
    AfterLoad(),
    AfterInsert(),
    AfterUpdate(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], AccountTxDao.prototype, "afterLoad", null);
AccountTxDao = __decorate([
    Entity({ name: 'accountTx' }),
    __metadata("design:paramtypes", [Object])
], AccountTxDao);
export { AccountTxDao };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudF90eF9kYW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGF0YWJhc2Uvbm9kZS9hY2NvdW50X3R4X2Rhby50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzNELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDakQsT0FBTyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNwRyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsMEJBQTBCLEVBQUUsZUFBZSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFHckcsSUFBYSxZQUFZLEdBQXpCLE1BQWEsWUFBWTtJQUN2QixZQUFtQixJQUE0QjtRQUM3QyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBaUNELFNBQVM7UUFDUCxJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssSUFBSSxFQUFFO1lBQ3pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztTQUNyQjtJQUNILENBQUM7Q0FDRixDQUFBO0FBbkNDO0lBREMsYUFBYSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUM7OEJBQzVDLElBQUk7MENBQUM7QUFJbkI7SUFGQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUM7SUFDeEIsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLDBCQUEwQixDQUFDLEVBQUUsQ0FBQzs4QkFDOUMsZUFBZTs0Q0FBQztBQUdoQztJQURDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLG9CQUFvQixDQUFDLEVBQUUsQ0FBQzs4QkFDckQsU0FBUzsrQ0FBQztBQUc3QjtJQURDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs4QkFDSSxNQUFNOzJEQUFDO0FBR3RDO0lBREMsTUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDOzhCQUNJLE1BQU07MkRBQUM7QUFHdEM7SUFEQyxNQUFNLEVBQUU7OzhDQUNpQjtBQUcxQjtJQURDLE1BQU0sRUFBRTs7NkNBQ2U7QUFHeEI7SUFEQyxNQUFNLEVBQUU7OEJBQ1EsSUFBSTs2Q0FBQztBQUd0QjtJQURDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs4QkFDVixJQUFJOzZDQUFDO0FBS3RCO0lBSEMsU0FBUyxFQUFFO0lBQ1gsV0FBVyxFQUFFO0lBQ2IsV0FBVyxFQUFFOzs7OzZDQUtiO0FBeENVLFlBQVk7SUFEeEIsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDOztHQUNqQixZQUFZLENBeUN4QjtTQXpDWSxZQUFZIn0=