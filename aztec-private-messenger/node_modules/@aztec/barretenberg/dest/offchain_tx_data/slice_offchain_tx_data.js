import { ProofId } from '../client_proofs/index.js';
import { OffchainAccountData } from './offchain_account_data.js';
import { OffchainDefiDepositData } from './offchain_defi_deposit_data.js';
import { OffchainJoinSplitData } from './offchain_join_split_data.js';
export function getOffchainDataLength(proofId) {
    switch (proofId) {
        case ProofId.DEPOSIT:
        case ProofId.WITHDRAW:
        case ProofId.SEND:
            return OffchainJoinSplitData.SIZE;
        case ProofId.ACCOUNT:
            return OffchainAccountData.SIZE;
        case ProofId.DEFI_DEPOSIT:
            return OffchainDefiDepositData.SIZE;
        default:
            return 0;
    }
}
export const sliceOffchainTxData = (proofIds, offchainTxData) => {
    let dataStart = 0;
    let dataEnd = 0;
    const result = proofIds.map(proofId => {
        dataStart = dataEnd;
        dataEnd += getOffchainDataLength(proofId);
        return offchainTxData.slice(dataStart, dataEnd);
    });
    if (dataEnd != offchainTxData.length) {
        throw new Error('Offchain data has unexpected length for given proof ids.');
    }
    return result;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xpY2Vfb2ZmY2hhaW5fdHhfZGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vZmZjaGFpbl90eF9kYXRhL3NsaWNlX29mZmNoYWluX3R4X2RhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ2pFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBRXRFLE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxPQUFnQjtJQUNwRCxRQUFRLE9BQU8sRUFBRTtRQUNmLEtBQUssT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUNyQixLQUFLLE9BQU8sQ0FBQyxRQUFRLENBQUM7UUFDdEIsS0FBSyxPQUFPLENBQUMsSUFBSTtZQUNmLE9BQU8scUJBQXFCLENBQUMsSUFBSSxDQUFDO1FBQ3BDLEtBQUssT0FBTyxDQUFDLE9BQU87WUFDbEIsT0FBTyxtQkFBbUIsQ0FBQyxJQUFJLENBQUM7UUFDbEMsS0FBSyxPQUFPLENBQUMsWUFBWTtZQUN2QixPQUFPLHVCQUF1QixDQUFDLElBQUksQ0FBQztRQUN0QztZQUNFLE9BQU8sQ0FBQyxDQUFDO0tBQ1o7QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxRQUFtQixFQUFFLGNBQXNCLEVBQUUsRUFBRTtJQUNqRixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDbEIsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDcEMsU0FBUyxHQUFHLE9BQU8sQ0FBQztRQUNwQixPQUFPLElBQUkscUJBQXFCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUMsT0FBTyxjQUFjLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUMsQ0FBQztJQUNILElBQUksT0FBTyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEVBQUU7UUFDcEMsTUFBTSxJQUFJLEtBQUssQ0FBQywwREFBMEQsQ0FBQyxDQUFDO0tBQzdFO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDIn0=