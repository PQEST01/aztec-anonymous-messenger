import { Web3Provider } from '@ethersproject/providers';
import { Contract } from 'ethers';
import { IDefiBridge } from '../../abis.js';
import { ContractWithSigner } from '../contract_with_signer.js';
export class DefiBridge {
    constructor(address, provider, defaultOptions = { gasLimit: 1000000 }) {
        this.address = address;
        this.defaultOptions = defaultOptions;
        this.provider = new Web3Provider(provider);
        this.contract = new Contract(address.toString(), IDefiBridge.abi, this.provider);
    }
    async finalise(inputAsset, outputAssetA, outputAssetB, bitConfig, interactionNonce, options = {}) {
        const contract = new ContractWithSigner(this.contract, { ...this.defaultOptions, ...options });
        return await contract.sendTx('finalise', inputAsset.toString(), outputAssetA.toString(), outputAssetB.toString(), interactionNonce, bitConfig);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaV9icmlkZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29udHJhY3RzL2RlZmlfYnJpZGdlL2RlZmlfYnJpZGdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ2xDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFaEUsTUFBTSxPQUFPLFVBQVU7SUFJckIsWUFDUyxPQUFtQixFQUMxQixRQUEwQixFQUNsQixpQkFBZ0MsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFO1FBRnRELFlBQU8sR0FBUCxPQUFPLENBQVk7UUFFbEIsbUJBQWMsR0FBZCxjQUFjLENBQXVDO1FBRTdELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsV0FBVyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUVELEtBQUssQ0FBQyxRQUFRLENBQ1osVUFBc0IsRUFDdEIsWUFBd0IsRUFDeEIsWUFBd0IsRUFDeEIsU0FBaUIsRUFDakIsZ0JBQXdCLEVBQ3hCLFVBQXlCLEVBQUU7UUFFM0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUMvRixPQUFPLE1BQU0sUUFBUSxDQUFDLE1BQU0sQ0FDMUIsVUFBVSxFQUNWLFVBQVUsQ0FBQyxRQUFRLEVBQUUsRUFDckIsWUFBWSxDQUFDLFFBQVEsRUFBRSxFQUN2QixZQUFZLENBQUMsUUFBUSxFQUFFLEVBQ3ZCLGdCQUFnQixFQUNoQixTQUFTLENBQ1YsQ0FBQztJQUNKLENBQUM7Q0FDRiJ9